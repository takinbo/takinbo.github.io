<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Localbitcoins Naira Weekly Trades</title>
        <meta charset="utf-8">
        <meta name="microtip" data-currency="btc" content="1TimbaZj9kttHJuwn4TddyZFU4zxP4tGM">
        <link rel="stylesheet" type="text/css" href="site.css">
    </head>
    <body>
        <h1>Weekly Bitcoin Trading Volume &mdash; Nigerian Naira</h1>
        <div id="container" style="height: 450px"></div>
        <small>TipJar: <a href="bitcoin:1TimbaZj9kttHJuwn4TddyZFU4zxP4tGM">1TimbaZj9kttHJuwn4TddyZFU4zxP4tGM</a></small>
        <script src="jquery.min.js"></script>
        <script src="highstock.js"></script>
        <script src="papaparse.min.js"></script>
        <script>
            $(function () {
                Papa.parse("localbitcoins-ngn.csv", {
                    download: true,
                    header: true,
                    dynamicTyping: true,
                    complete: function (results) {
                        console.log(results);
                        var trades = results.data.filter(function (i) { return i.date; }).map(function (i) { return [(new Date(i.date)).getTime(), i.trades]; });
                        var volume = results.data.filter(function (i) { return i.date; }).map(function (i) { return [(new Date(i.date)).getTime(), i.volume]; });
                        console.log(volume);
                        $('#container').highcharts('StockChart', {
                            chart: {
                                alignTicks: true,
                                animation: false
                            },
                            yAxis: [{
                                labels: {
                                    align: 'right',
                                    x: -3
                                },
                                title: {
                                    text: 'Volume'
                                },
                                height: '60%',
                                lineWidth: 1
                            }, {
                                labels: {
                                    align: 'right',
                                    x: -3
                                },
                                title: {
                                    text: 'Deals'
                                },
                                height: '35%',
                                top: '65%',
                                offset: 0,
                                lineWidth: 1
                            }],
                            rangeSelector: {
                                selected: 3
                            },
                            series: [{
                                type: 'column',
                                animation: false,
                                name: 'Volume',
                                data: volume,
                                yAxis: 0,
                                tooltip: {
                                    valuePrefix: 'â‚¦ '
                                }
                            },{
                                type: 'column',
                                animation: false,
                                name: 'Deals',
                                data: trades,
                                yAxis: 1
                            }]
                        });
                    }
                });
            });
        </script>
    </body>
</html>
